var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{h(i.next(t))}catch(e){o(e)}}function s(t){try{h(i["throw"](t))}catch(e){o(e)}}function h(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}h((i=i.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return i([t,e])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){h.label=n[1];break}if(6===n[0]&&h.label<a[1]){h.label=a[1],a=n;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(n);break}a[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(i){n=[6,i],o=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseActor=function(t){function e(){var e=t.call(this)||this;e.m_armatureContainer=new DragonBonesArmatureContainer,e.addChild(e.m_armatureContainer),e.m_gestureData=new Array;var n=20,i=45,r=0,o=.7,a=16,s=16,h=.65,c=1,u=!1,l=!1;return e.m_dropShadowFilter=new egret.DropShadowFilter(n,i,r,o,a,s,h,c,u,l),e}return __extends(e,t),e.prototype.GotoIdle=function(){},e.prototype.GotoHurt=function(){},e.prototype.GotoDead=function(){},e.prototype.GotoRun=function(){},e.prototype.Update=function(t){},e}(egret.DisplayObjectContainer);__reflect(BaseActor.prototype,"BaseActor");var BasePanel=function(t){function e(){var e=t.call(this)||this;return e.w=0,e.h=0,e.w=Config.stageWidth,e.h=Config.stageHeight,e.initPanel(),e.addEventListener(egret.Event.RESIZE,e._OnResize,e),e}return __extends(e,t),e.prototype.initPanel=function(){},e.prototype.initData=function(){},e.prototype.onEnter=function(){},e.prototype.onExit=function(){},e.prototype._OnResize=function(t){void 0===t&&(t=null)},e}(eui.Component);__reflect(BasePanel.prototype,"BasePanel");var Gesture=function(){function t(){this._symbol=["28","46","82","64","141","585","3","7","5","1","4321876","2345678"],this._symbolG=[0,0,3,3,5,5,1,1,2,2,4,4]}return t.prototype.Init=function(){this._gestureData=[],this._gestureRes=RES.getRes("gesture_json");for(var t=0;t<this._gestureRes.length;t++)for(var e=this._gestureRes[t].data,n=0;n<e.length;n++){var i={type:-1,data:""};i.type=this._gestureRes[t].type,i.data=e[n],this._gestureData.push(i)}},Object.defineProperty(t.prototype,"gestureRes",{get:function(){return this._gestureRes},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(t,e){this._layer=t,this._group=e,this._group.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this._group.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this._group.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mouseUp,this),this._group.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.removeEvent=function(){this._layer.graphics.clear(),this._group.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this._group.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this._group.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.mouseUp,this),this._group.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},t.prototype.mouseDown=function(t){this._isDown=!0,this._layer.graphics.clear(),this._mouseDatas=[],this._lineData=[];var e=new egret.Point(t.stageX,t.stageY);this._mouseDatas.push(e),this._lineData.push(e),this._currentPoint=e,this._layer.graphics.moveTo(this._currentPoint.x,this._currentPoint.y)},t.prototype.mouseMove=function(t){if(this._isDown){var e=GameObjectPool.getInstance().createObject(egret.Point,"egretPoint");e.x=t.stageX,e.y=t.stageY,this._mouseDatas.push(e),this._lineData.push(e),this._layer.graphics.lineStyle(8,16777215),this._layer.graphics.lineTo(e.x,e.y),this._layer.graphics.endFill(),this._currentPoint=e}},t.prototype.mouseUp=function(t){if(this._isDown){this._isDown=!1;var e=new egret.Point(t.stageX,t.stageY);this._mouseDatas.push(e),this._lineData.push(e),this._layer.graphics.clear(),this.motion()}},t.prototype.motion=function(){var t=[],e=0,n=this._mouseDatas.length;t.push(this._mouseDatas[e]);for(var i=0;n>i;i++)egret.Point.distance(this._mouseDatas[e],this._mouseDatas[i])>20&&(e=i,t.push(this._mouseDatas[e]));this._mouseDatas=t,this.parseDirection()},t.prototype.parseDirection=function(){this._dirsArr=[];for(var t=this._mouseDatas.length,e=0;t>e;e++)if(this._mouseDatas[e+1]){var n=this._mouseDatas[e],i=this._mouseDatas[e+1],r=n.y-i.y,o=egret.Point.distance(n,i),a=Math.asin(r/o),s=Number((57.29578*a).toFixed(1)),h=this.quadrant(n,i),c=this.getDirByAngQuad(s,h);this._dirsArr.push(c)}var u=this.repDiff(this._dirsArr);console.log(u);var l=this.sweep(u);console.log("type------------->: ",l),this.disEvent(l)},t.prototype.disEvent=function(t){if(GameConfig.gestureType=t,-1!=t){Common.dispatchEvent(MainNotify.gestureAction);for(var e=0;e<this._gestureRes.length;e++)if(t==this._gestureRes[e].type){this._layer.graphics.moveTo(this._lineData[0].x,this._lineData[0].y);for(var n=1;n<this._lineData.length;n++)this._layer.graphics.lineStyle(8,this._gestureRes[e].color),this._layer.graphics.lineTo(this._lineData[n].x,this._lineData[n].y),this._layer.graphics.endFill();egret.setTimeout(this._clearGraphics,this,200);break}}},t.prototype._clearGraphics=function(){for(;this._lineData.length>0;){var t=this._lineData.pop();GameObjectPool.getInstance().destroyObject(t)}this._layer.graphics.clear(),this._lineData.length=0},t.prototype.sweep=function(t){for(var e=-1,n=-1,i=this._gestureData.length,r=0;i>r;r++){var o=this.Levenshtein_Distance_Percent(this._gestureData[r].data,t);o>n&&(n=o,e=this._gestureData[r].type)}return.4>n&&(e=-1),e},t.prototype.repDiff=function(t){for(var e="",n=t.length,i=0,r=0;n>r;r++)i!=t[r]&&(i=t[r],e+=t[r]);return e},t.prototype.getDirByAngQuad=function(t,e){switch(e){case 1:return 22.5>=t&&t>=0?1:67.5>=t&&t>22.5?8:7;case 2:return 22.5>=t&&t>=0?5:67.5>=t&&t>22.5?6:7;case 3:return-67.5>=t&&t>=-90?3:-22.5>=t&&t>-67.5?4:5;case 4:return-67.5>=t&&t>=-90?3:-22.5>=t&&t>-67.5?2:1}},t.prototype.quadrant=function(t,e){return e.x>=t.x?e.y<=t.y?1:4:e.y<=t.y?2:3},t.prototype.Levenshtein_Distance=function(t,e){var n,i,r,o,a,s=t.length,h=e.length,c=[];if(0==s)return h;if(0==h)return s;for(n=0;s>=n;n++)c[n]=[],c[n][0]=n;for(i=0;h>=i;i++)c[0][i]=i;for(n=1;s>=n;n++)for(r=t.charAt(n-1),i=1;h>=i;i++)o=e.charAt(i-1),a=r==o?0:1,c[n][i]=this.Minimum(c[n-1][i]+1,c[n][i-1]+1,c[n-1][i-1]+a);return c[s][h]},t.prototype.Levenshtein_Distance_Percent=function(t,e){var n=t.length>e.length?t.length:e.length,i=this.Levenshtein_Distance(t,e);return 1-i/n},t.prototype.Minimum=function(t,e,n){return e>t?n>t?t:n:n>e?e:n},t}();__reflect(Gesture.prototype,"Gesture");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function r(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(i,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var h=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(i,generateJSON.paths[t])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){e.call(i,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Tips=function(t){function e(){var e=t.call(this)||this;return e.m_imgBg=new egret.Bitmap,e.addChild(e.m_imgBg),e.m_labDesc=new egret.TextField,e.addChild(e.m_labDesc),e.m_data=new TipsData,e}return __extends(e,t),e.prototype.Init=function(){this.m_imgBg.visible=!1,this.m_data.tipsBg.length>0&&(this.m_imgBg.texture=RES.getRes(this.m_data.tipsBg),this.m_imgBg.visible=!0),this.m_labDesc.textColor=this.m_data.descColor,this.m_labDesc.size=this.m_data.descSize,this.m_labDesc.textAlign="center",this.m_labDesc.text=this.m_data.desc,this.m_labDesc.bold=!0},Object.defineProperty(e.prototype,"data",{get:function(){return this.m_data},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(Tips.prototype,"Tips");var TipsData=function(){function t(){this.tipsBg="",this.desc="",this.descSize=40,this.descColor=Common.TextColors.red}return t}();__reflect(TipsData.prototype,"TipsData");var GameConfig=function(){function t(){}return t.baseFallSpeed=.1,t.monsterAddDelay=1500,t}();__reflect(GameConfig.prototype,"GameConfig");var EGameState;!function(t){t[t.Ready=0]="Ready",t[t.Start=1]="Start",t[t.Pause=2]="Pause",t[t.End=3]="End"}(EGameState||(EGameState={}));var EPanelAnimation;!function(t){t[t.None=0]="None",t[t.CenterSlight=1]="CenterSlight",t[t.CenterViolent=2]="CenterViolent",t[t.LeftToRight=3]="LeftToRight",t[t.RightToLeft=4]="RightToLeft",t[t.UpToDown=5]="UpToDown",t[t.DownToUp=6]="DownToUp",t[t.CenterZoomOut=7]="CenterZoomOut"}(EPanelAnimation||(EPanelAnimation={}));var EMonsterState;!function(t){t[t.Ready=0]="Ready",t[t.Run=1]="Run",t[t.FallDown=2]="FallDown",t[t.Dead=3]="Dead",t[t.Stop=4]="Stop"}(EMonsterState||(EMonsterState={}));var EWolfType;!function(t){t[t.Gray=1]="Gray",t[t.White=2]="White",t[t.Red=3]="Red"}(EWolfType||(EWolfType={}));var EBottleType;!function(t){t[t.Ice=201]="Ice",t[t.Thunder=202]="Thunder"}(EBottleType||(EBottleType={}));var EGestureDifficult;!function(t){t[t.Normal=1]="Normal",t[t.Hard=2]="Hard",t[t.Magic=0]="Magic"}(EGestureDifficult||(EGestureDifficult={}));var EBatState;!function(t){t[t.Revival=1]="Revival",t[t.Dead=2]="Dead"}(EBatState||(EBatState={}));var EThiefState;!function(t){t[t.Revival=1]="Revival",t[t.Dead=2]="Dead"}(EThiefState||(EThiefState={}));var EMonsterType;!function(t){t[t.Normal=1]="Normal",t[t.Elite=2]="Elite",t[t.Boss=3]="Boss"}(EMonsterType||(EMonsterType={}));var GameTips=function(){function t(){}return t.test="测试提示",t}();__reflect(GameTips.prototype,"GameTips");var MainNotify;!function(t){t.openGameStartPanel="openGameStartPanel",t.closeGameStartPanel="closeGameStartPanel",t.openGamePanel="openGamePanel",t.closeGamePanel="closeGamePanel",t.openGameOverPanel="openGameOverPanel",t.closeGameOverPanel="closeGameOverPanel",t.gestureAction="gestureAction",t.beginLocus="beginLocus",t.endLocus="endLocus",t.openBottomBtnPanel="openBottomBtnPanel",t.closeBottomBtnPanel="closeBottomBtnPanel",t.openBackpackPanel="openBackpackPanel",t.closeBackpackPanel="closeBackpackPanel"}(MainNotify||(MainNotify={}));var DragonBonesAnimations=function(){function t(){}return t.Idle="idle",t.Dead="dead",t.Run="run",t.Hurt="hurt",t.Explore="explore",t}();__reflect(DragonBonesAnimations.prototype,"DragonBonesAnimations");var DragonBonesArmature=function(t){function e(e,n){var i=t.call(this)||this;return i._armature=e,i._clock=n,i._armatureDisplay=i._armature.getDisplay(),i.addChild(i._armatureDisplay),i._frameCalls=[],i._completeCalls=[],i._tagetBones=[],i}return __extends(e,t),e.prototype.addListeners=function(){this._armature.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onComplete,this),this._armature.addEventListener(dragonBones.EventObject.FRAME_EVENT,this.onFrame,this)},e.prototype.removeLiteners=function(){this._armature.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onComplete,this),this._armature.removeEventListener(dragonBones.EventObject.FRAME_EVENT,this.onFrame,this)},e.prototype.addCompleteCallFunc=function(t,e){for(var n=0;n<this._completeCalls.length;n++)if(this._completeCalls[n][0]==t&&this._completeCalls[n][1]==e)return;this._completeCalls.push([t,e])},e.prototype.removeCompleteCallFunc=function(t,e){for(var n=0;n<this._completeCalls.length;n++){var i=this._completeCalls[n];i[0]==t&&i[1]==e&&this._completeCalls.splice(n,1)}},e.prototype.addFrameCallFunc=function(t,e){for(var n=0;n<this._frameCalls.length;n++)if(this._frameCalls[n][0]==t&&this._frameCalls[n][1]==e)return;this._frameCalls.push([t,e])},e.prototype.getBone=function(t,e){for(var n=0;n<this._tagetBones.length;n++)if(this._tagetBones[n][0]==t&&this._tagetBones[n][1]==e)return null;return this._tagetBones.push([t,e]),this._armature.getBone(t)},e.prototype.onComplete=function(t){for(var e=0;e<this._completeCalls.length;e++){var n=this._completeCalls[e];n[0].call(n[1])}},e.prototype.onFrame=function(t){for(var e=0;e<this._frameCalls.length;e++){var n=this._frameCalls[e];n[0].call(n[1],t)}},e.prototype.play=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=1),this.start(),void 0==e?this._armature.animation.play(t).timeScale=n:this._armature.animation.play(t,e).timeScale=n},e.prototype.playByFrame=function(t,e,n,i){void 0===i&&(i=1),this.start(),void 0==n?this._armature.animation.gotoAndPlayByFrame(t,e).timeScale=i:this._armature.animation.gotoAndPlayByFrame(t,e,n).timeScale=i},e.prototype.fadeIn=function(t,e,n,i,r){this._armature.animation.fadeIn(t,e,n,i,r,2)},e.prototype.pause=function(t){this._armature.animation.stop(t)},e.prototype.setTimeScale=function(t,e){this._armature.animation.play(t).timeScale=e},e.prototype.stopByFrame=function(t,e){this.start(),this._armature.animation.gotoAndStopByFrame(t,e)},e.prototype.playMuti=function(t,e,n){void 0===n&&(n=null),this.start();for(var i=0;i<t.length;i++);},e.prototype.fadeOut=function(t){var e=this._armature.animation.getState(t);e.fadeOut(0,!1)},e.prototype.getState=function(t){return this._armature.animation.getState(t)},e.prototype.start=function(){this._clock.add(this._armature),this.addListeners()},e.prototype.stop=function(){this._clock.remove(this._armature),this.removeLiteners()},e.prototype.removeArmatureDisplay=function(){null!=this._armatureDisplay&&this.removeChild(this._armatureDisplay)},Object.defineProperty(e.prototype,"Armature",{get:function(){return this._armature},set:function(t){this._armature=t,this._armatureDisplay=this._armature.getDisplay(),this.addChild(this._armatureDisplay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Clock",{get:function(){return this._clock},set:function(t){this._clock=t},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(DragonBonesArmature.prototype,"DragonBonesArmature");var DragonBonesArmatureContainer=function(t){function e(){var e=t.call(this)||this;return e.armatures=new Array,e.actions={},e.bones={},e}return __extends(e,t),e.prototype.getArmatures=function(){return this.armatures},e.prototype.register=function(t,e){this.armatures.push(t);for(var n=0;n<e.length;n++)this.actions[e[n]]=this.armatures.length-1},e.prototype.clear=function(){for(;this.armatures.length>0;){var t=this.armatures.pop();t.removeArmatureDisplay()}this.actions={},this.bones={}},e.prototype.addCompleteCallFunc=function(t,e){for(var n=0;n<this.armatures.length;n++){var i=this.armatures[n];i.addCompleteCallFunc(t,e)}},e.prototype.removeCompleteCallFunc=function(t,e){for(var n=0;n<this.armatures.length;n++){var i=this.armatures[n];i.removeCompleteCallFunc(t,e)}},e.prototype.addFrameCallFunc=function(t,e){for(var n=0;n<this.armatures.length;n++){var i=this.armatures[n];i.addFrameCallFunc(t,e)}},e.prototype.getBone=function(t,e,n){var i=t+e;if(!this.bones[i])for(var r=0;r<this.armatures.length;r++){var o=this.armatures[r],a=o.getBone(e,n);if(null!=a){this.bones[i]=a;break}}return this.bones[i]},e.prototype.getState=function(t){if(null==this.actions[t])return void Common.log("不存在动作---->"+t+typeof t);var e=this.actions[t],n=this.armatures[e];return n?(this.curArmatureIndex=e,n.getState(t)):null},e.prototype.play=function(t,e,n,i,r){if(void 0===e&&(e=void 0),void 0===n&&(n=1),void 0===i&&(i=null),void 0===r&&(r=1),null==this.actions[t])return void Common.log("不存在动作---->"+t+typeof t);var o=this.actions[t];o!=this.curArmatureIndex&&this.remove();var a=this.armatures[o];a&&(this.addChild(a),this.curArmatureIndex=o,1==n?(Common.log("播放动作---->"+t),a.play(t,e,r)):a.playByFrame(t,i,e,r))},e.prototype.setTimeScale=function(t,e){if(null==this.actions[t])return void Common.log("不存在动作---->"+t+typeof t);var n=this.actions[t];n!=this.curArmatureIndex&&this.remove();var i=this.armatures[n];i&&(this.addChild(i),this.curArmatureIndex=n,i.setTimeScale(t,e))},e.prototype.fadeIn=function(t,e,n,i,r){if(null!=this.actions[t]){var o=this.actions[t];o!=this.curArmatureIndex&&this.remove();var a=this.armatures[o];a&&(this.addChild(a),this.curArmatureIndex=o,a.fadeIn(t,e,n,i,r))}},e.prototype.pause=function(t){var e=this.armatures[this.curArmatureIndex];e&&e.pause(t)},e.prototype.stop=function(){var t=this.armatures[this.curArmatureIndex];t&&t.stop()},e.prototype.stopByFrame=function(t,e){var n=this.armatures[this.curArmatureIndex];n&&n.stopByFrame(t,e)},e.prototype.remove=function(){var t=this.armatures[this.curArmatureIndex];t&&(t.stop(),t.parent.removeChild(t),this.curArmatureIndex=null)},Object.defineProperty(e.prototype,"CurArmatureIndex",{set:function(t){this.curArmatureIndex=t},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(DragonBonesArmatureContainer.prototype,"DragonBonesArmatureContainer");var DragonBonesFactory=function(){function t(){this.factory=new dragonBones.EgretFactory,this.clocks=new Array,this.clockLen=0}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.addTextureAtlas=function(t,e){return this.factory.addTextureAtlas(new dragonBones.EgretTextureAtlas(t,e))},t.prototype.initDragonBonesArmatureFile=function(t,e,n){this.factory.parseDragonBonesData(t),this.factory.parseTextureAtlasData(e,n)},t.prototype.makeArmature=function(t,e,n){void 0===n&&(n=-1);var i=this.factory.buildArmature(t,e);if(!i)return null;var r=this.createWorldClock(n),o=new DragonBonesArmature(i,r);return o},t.prototype.buildArmature=function(t,e){return this.factory.buildArmature(t,e)},t.prototype.createWorldClock=function(t){for(var e=0;e<this.clockLen;e++)if(this.clocks[e].timeScale==t)return this.clocks[e];var n=new dragonBones.WorldClock;return n.timeScale=t,this.clocks.push(n),this.clockLen=this.clocks.length,n},t.prototype.Update=function(t){this.onStartTick(t)},t.prototype.onStartTick=function(t){for(var e=0;e<this.clocks.length;e++){var n=this.clocks[e];n.advanceTime(.001)}return!1},t.prototype.stopTimer=function(){egret.stopTick(this.onStartTick,this)},t}();__reflect(DragonBonesFactory.prototype,"DragonBonesFactory");var GameManager=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"Instance",{get:function(){return null==this._Instance&&(this._Instance=new e),this._Instance},enumerable:!0,configurable:!0}),e.prototype.Init=function(){PanelManager.initPanel(),this._gameState=EGameState.Ready,Common.dispatchEvent(MainNotify.openGameStartPanel),Common.dispatchEvent(MainNotify.openBottomBtnPanel)},e.prototype.Stop=function(){},e.prototype.Start=function(){this._time=0,this._gameState=EGameState.Start,this._startTime=egret.getTimer(),this._lastTime=this._startTime},e.prototype.Continue=function(){this._gameState=EGameState.Start,this._startTime=egret.getTimer(),this._lastTime=this._startTime},e.prototype.Update=function(){if(this._gameState==EGameState.Start){this._startTime=egret.getTimer();var t=this._startTime-this._lastTime;null!=PanelManager.m_gameScenePanel&&PanelManager.m_gameScenePanel.Update(t),DragonBonesFactory.getInstance().Update(t),this._lastTime=this._startTime}},Object.defineProperty(e.prototype,"GameState",{get:function(){return this._gameState},set:function(t){this._gameState=t},enumerable:!0,configurable:!0}),e}(egret.Sprite);__reflect(GameManager.prototype,"GameManager");var PanelManager;!function(t){function e(){null==t.m_bottomBtnPanel&&(t.m_bottomBtnPanel=new BottomBtnPanel),t.m_bottomBtnPanel.onEnter()}function n(){null!=t.m_bottomBtnPanel&&t.m_bottomBtnPanel.onExit()}function i(){null==t.m_gameStartPanel&&(t.m_gameStartPanel=new GameStartPanel),t.m_gameStartPanel.onEnter()}function r(){null!=t.m_gameStartPanel&&t.m_gameStartPanel.onExit()}function o(){null==t.m_backpackPanel&&(t.m_backpackPanel=new BackpackPanel),t.m_backpackPanel.onEnter()}function a(){null!=t.m_backpackPanel&&t.m_backpackPanel.onExit()}function s(){null==t.m_gameScenePanel&&(t.m_gameScenePanel=new GameScenePanel),t.m_gameScenePanel.onEnter()}function h(){null!=t.m_gameScenePanel&&t.m_gameScenePanel.onExit()}function c(){Common.addEventListener(MainNotify.openGameStartPanel,i,t),Common.addEventListener(MainNotify.closeGameStartPanel,r,t),Common.addEventListener(MainNotify.openBottomBtnPanel,e,t),Common.addEventListener(MainNotify.closeBottomBtnPanel,n,t),Common.addEventListener(MainNotify.openBackpackPanel,o,t),Common.addEventListener(MainNotify.closeBackpackPanel,a,t),Common.addEventListener(MainNotify.openGamePanel,s,t),Common.addEventListener(MainNotify.closeGamePanel,h,t)}t.initPanel=c}(PanelManager||(PanelManager={}));var ETipsType;!function(t){t[t.None=1]="None",t[t.DownToUp=2]="DownToUp"}(ETipsType||(ETipsType={}));var TipsManager;!function(t){function e(t,e,n,r,o,a,s){void 0===e&&(e=Common.TextColors.red),void 0===n&&(n=ETipsType.DownToUp),void 0===r&&(r=40),void 0===o&&(o=""),void 0===a&&(a=Config.stageHalfWidth),void 0===s&&(s=Config.stageHalfHeight);var h=GameObjectPool.getInstance().createObject(Tips,"Tips");switch(h.data.desc=t,h.data.descColor=e,h.data.descSize=r,h.data.tipsBg=o,h.Init(),h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2,h.x=a,h.y=s,i.push(h),Common.gameScene().tipsLayer.addChild(h),n){case ETipsType.None:h.alpha=0,egret.Tween.get(h).to({alpha:1},300).call(this.removeTips,this);break;case ETipsType.DownToUp:h.alpha=0,h.y+=h.height,egret.Tween.get(h).to({alpha:1,y:h.y-h.height},500,egret.Ease.backOut).call(this.removeTips,this)}}function n(){if(null!=i&&i.length>0){var t=function(){var t=i.pop();Common.gameScene().tipsLayer.contains(t)&&(Common.gameScene().tipsLayer.removeChild(t),GameObjectPool.getInstance().destroyObject(t))};egret.Tween.get(i).to({alpha:0},300).call(t,this)}}var i=[];t.Show=e,t.removeTips=n}(TipsManager||(TipsManager={}));var Common;!function(t){function e(){return null==this.curScene&&(this.curScene=new GameScene),this.curScene}t.gameScene=e}(Common||(Common={}));var GameScene=function(t){function e(){var e=t.call(this)||this;return e.uiLayer=new egret.DisplayObjectContainer,e.topLayer=new egret.DisplayObjectContainer,e.effectLayer=new egret.DisplayObjectContainer,e.mainUILayer=new egret.DisplayObjectContainer,e.maskLayer=new egret.DisplayObjectContainer,e.tipsLayer=new egret.DisplayObjectContainer,e.init(),e}return __extends(e,t),e.prototype.init=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer)},e}(egret.DisplayObjectContainer);__reflect(GameScene.prototype,"GameScene");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.color=16362243,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e.CreatLoadingUI(),e}return __extends(e,t),e.prototype.CreatLoadingUI=function(){var t=Common.createBitmap("loading_01_png");t.width=Config.stageWidth,t.height=Config.stageHeight,this.addChild(t);var e=new egret.Sprite;this.addChild(e);var n=Config.stageWidth,i=Config.stageHeight,r=80,o=Common.createBitmap("loading_04_png");o.x=n-o.width>>1,o.y=i-o.height>>1,e.addChild(o);var a=Common.createBitmap("loading_02_png");a.x=n-a.width>>1,a.y=i-a.height>>1,e.addChild(a),this.proWidth=a.width,this.progress=a;var s=new Common.MoonDisplayObject;s.type=Common.Const.SHAPE_CIRCLE,s.data={r:r/2,c:14781965},s.setBackground(16777215,5),this.addChild(s),s.x=o.x+o.width-r/2,s.y=o.y+r/2-10,this.txtLoadPos=new egret.Point(s.x,s.y);var h=Common.createText("",0,0,40,10838038);this.txtLoad=h,this.addChild(h);var c=Common.createText("游戏加载",0,0,40,10838038);c.x=n-c.width>>1,c.y=s.y+c.height,this.addChild(c),this.createAirFan(),this.airFan.x=this.txtLoadPos.x,this.airFan.y=this.txtLoadPos.y;var u=Common.createBitmap("loading_03_png");u.anchorOffsetX=u.width>>1,u.anchorOffsetY=u.height>>1,u.x=Config.stageHalfWidth,u.y=Config.stageHalfHeight-u.height,this.addChild(u),this.update(0),this.play()},e.prototype.updateName=function(t){},e.prototype.createLogo=function(){var t=Config.stageWidth,e=Config.stageHeight,n=new Common.MoonDisplayObject;n.type=Common.Const.SHAPE_CIRCLE,n.data={r:50,c:14781965},n.setBackground(16777215,2),n.x=t>>1,n.y=n.height,this.addChild(n);var i=Common.createText("GALE",0,0);i.size=40,i.x=n.x-(i.width>>1),i.y=n.y-(i.height>>1)-15,this.addChild(i),i=Common.createText("GAME",0,0),i.size=30,i.x=n.x-(i.width>>1),i.y=n.y-(i.height>>1)+15,this.addChild(i),i=Common.createText("孢子游戏",0,0),i.size=40,i.textColor=14720801,i.x=t-i.width-10,i.y=e-i.height-10,this.addChild(i)},e.prototype.createAirFan=function(){this.airFan=new egret.Sprite,this.addChild(this.airFan);for(var t=0;4>t;t++){var e=new egret.Sprite;this.airFan.addChild(e),e.graphics.lineStyle(0),e.graphics.beginFill(16777215),e.graphics.cubicCurveTo(-29,-28,29,-28,0,0),e.graphics.endFill(),e.rotation=90*t}},e.prototype.update=function(t){if(!(t>1)){t>.99&&this.stop(),this.progress.width=500*t;var e=this.txtLoad,n=this.txtLoadPos;e.text=Math.ceil(100*t)+"%",e.x=Config.stageWidth-e.width>>1,e.y=n.y-e.height/2;var i=Common.getCircle(5+5*Math.random(),this.color,n.x,n.y);i.y=10-20*Math.random(),this.addChildAt(i,2)}},e.prototype.play=function(){this.stop(),egret.startTick(this.loop,this)},e.prototype.stop=function(){egret.stopTick(this.loop,this)},e.prototype.loop=function(t){return this.airFan.rotation+=3,!0},e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this)},e.prototype.onProgress=function(t,e){this.update(t/e)},e.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=16635225),void 0===e&&(e=14720801);var n=Config.stageWidth,i=Config.stageHeight,r=new egret.Matrix;r.createGradientBox(2*n,2*i,Math.PI/2);var o=new egret.Sprite;return o.graphics.beginGradientFill(egret.GradientType.RADIAL,[t,e],[1,1],[0,255],r),o.graphics.drawRect(0,0,n,i),this.addChild(o),o},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BackpackPanel=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.skinName="resource/game_skins/backpackPanel.exml",e}return __extends(e,t),e.prototype.initPanel=function(){},e.prototype.initData=function(){},e.prototype.onEnter=function(){Common.curPanel=PanelManager.m_backpackPanel,this.touchChildren=!0,Common.gameScene().uiLayer.addChild(this)},e.prototype.onExit=function(){this.touchChildren=!1,Common.gameScene().uiLayer.removeChild(this)},e.prototype._OnBtnReturn=function(){Common.dispatchEvent(MainNotify.closeBackpackPanel),Common.dispatchEvent(MainNotify.openGameStartPanel)},e.prototype._OnBtnUse=function(){},e.prototype._OnBtnLeft=function(){},e.prototype._OnBtnRight=function(){},e.prototype.onComplete=function(){this.m_btnReturn.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnReturn,this),this.m_btnUse.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnUse,this),this.m_btnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnLeft,this),this.m_btnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnRight,this),this._OnResize()},e.prototype._OnResize=function(t){void 0===t&&(t=null)},e}(BasePanel);__reflect(BackpackPanel.prototype,"BackpackPanel");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._OnResize=function(t){Config.stageWidth=this.stage.stageWidth,Config.stageHeight=this.stage.stageHeight,Config.stageHalfWidth=this.stage.stageWidth/2,Config.stageHalfHeight=this.stage.stageHeight/2},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this._OnResize(null),this.addEventListener(egret.Event.RESIZE,this._OnResize,this),egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){GameManager.Instance.Update()}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)}),("windows"==Common.systemType()||"mac"==Common.systemType())&&(egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),this.addChild(Common.gameScene())},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0)];case 2:return n.sent(),[4,this.loadTheme()];case 3:return n.sent(),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadGroup("enter",1,t)];case 4:return n.sent(),this.stage.removeChild(t),[3,6];case 5:return e=n.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var i=new eui.Theme("resource/default.thm.json",t.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){GameManager.Instance.Init()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var BottomBtnPanel=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.skinName="resource/game_skins/bottomBtn.exml",e}return __extends(e,t),e.prototype.initPanel=function(){},e.prototype.initData=function(){},e.prototype.onEnter=function(){this.touchChildren=!0,Common.gameScene().mainUILayer.addChild(this),this._ShowBtn()
},e.prototype.onExit=function(){this.touchChildren=!1,this._HideBtn()},e.prototype._OnBtnItem=function(){Common.curPanel!=PanelManager.m_backpackPanel&&(Common.dispatchEvent(MainNotify.closeGameStartPanel),Common.dispatchEvent(MainNotify.openBackpackPanel))},e.prototype._OnBtnAchieve=function(){},e.prototype._OnBtnRank=function(){},e.prototype.onComplete=function(){this.m_btnItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnItem,this),this.m_btnAchieve.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnAchieve,this),this.m_btnRank.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnRank,this),this._OnResize()},e.prototype._OnShowBtn=function(){},e.prototype._ShowBtn=function(){this.alpha=0,this.y=Config.stageHeight,egret.Tween.get(this).to({alpha:1,y:Config.stageHeight-this.height},500,egret.Ease.backIn).call(this._OnShowBtn,this)},e.prototype._OnHideBtn=function(){Common.gameScene().mainUILayer.removeChild(this)},e.prototype._HideBtn=function(){egret.Tween.get(this).to({alpha:0,y:Config.stageHeight},500,egret.Ease.backOut).call(this._OnHideBtn,this)},e.prototype._OnResize=function(t){void 0===t&&(t=null)},e}(BasePanel);__reflect(BottomBtnPanel.prototype,"BottomBtnPanel");var GameScenePanel=function(t){function e(){var e=t.call(this)||this;e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.skinName="resource/game_skins/gameScenePanel.exml",GameConfig.monsterConfig=RES.getRes("monsterConfig_json"),GameConfig.gestureConfig=RES.getRes("gesture_json");for(var n=0;n<GameConfig.monsterConfig.length;n++){var i=GameConfig.monsterConfig[n];e._InitBattleDragonBones(i.Animation)}return e.m_monsters=new Array,e}return __extends(e,t),e.prototype.initPanel=function(){this.m_gestureShape=new egret.Shape,this.m_gesture=new Gesture,this.m_gesture.Init()},e.prototype.initData=function(){GameConfig.gestureType=0,this.m_monsterAddDelay=0,this.Score=0,this.m_proPower.value=0},e.prototype.onEnter=function(){Common.curPanel=PanelManager.m_gameScenePanel,this.touchChildren=!0,Common.gameScene().uiLayer.addChild(this),this.initData(),this.m_gesture.addEvent(this.m_gestureShape,this.m_groupGesture),Common.addEventListener(MainNotify.gestureAction,this._OnGesture,this)},e.prototype.onExit=function(){this.touchChildren=!1,Common.gameScene().uiLayer.removeChild(this),this.m_gesture.removeEvent(),Common.removeEventListener(MainNotify.gestureAction,this._OnGesture,this)},e.prototype.Update=function(t){GameManager.Instance.GameState!=EGameState.Pause&&(this.m_monsterAddDelay+=t),this.m_monsterAddDelay>=GameConfig.monsterAddDelay&&(this.m_monsterAddDelay=0,this._CreateMonster());for(var e=0;e<this.m_monsters.length;e++)this.m_monsters[e].Update(t)},e.prototype.RemoveMonster=function(t){for(var e=0;e<this.m_monsters.length;e++)if(this.m_monsters[e]==t){this.m_groupGame.removeChild(this.m_monsters[e]),this.m_monsters.splice(e,1);break}},Object.defineProperty(e.prototype,"Score",{get:function(){return this.m_score},set:function(t){this.m_score=t,this.m_labScore.text=this.m_score.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Power",{get:function(){return this.m_proPower.value},set:function(t){this.m_proPower.value=t},enumerable:!0,configurable:!0}),e.prototype._OnGesture=function(){if(GameConfig.gestureType>0&&this.m_monsters.length>0)for(var t=0;t<this.m_monsters.length;t++){var e=this.m_monsters[t];e.GestureType==GameConfig.gestureType&&e.GotoDead()}},e.prototype._OnBtnPause=function(){},e.prototype.onComplete=function(){this.addChild(this.m_gestureShape),this.m_btnPause.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnBtnPause,this),this._OnResize()},e.prototype._CreateMonster=function(){var t=GameObjectPool.getInstance().createObject(Monster,"Monster");t.Init(),this.m_monsters.push(t);for(var e=this.m_monsters.length-1;e>=0;e--)this.m_groupGame.addChild(this.m_monsters[e])},e.prototype._InitBattleDragonBones=function(t){var e=RES.getRes(t+"_ske_json"),n=RES.getRes(t+"_tex_json"),i=RES.getRes(t+"_tex_png");DragonBonesFactory.getInstance().initDragonBonesArmatureFile(e,n,i)},e.prototype._OnResize=function(t){void 0===t&&(t=null)},e}(BasePanel);__reflect(GameScenePanel.prototype,"GameScenePanel");var GameStartPanel=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(eui.UIEvent.COMPLETE,e.onComplete,e),e.skinName="resource/game_skins/gameStart.exml",e}return __extends(e,t),e.prototype.initPanel=function(){},e.prototype.initData=function(){},e.prototype.onEnter=function(){Common.curPanel=PanelManager.m_gameStartPanel,this.touchChildren=!0,this.m_imgCloth.y=Config.stageHeight-1375,Common.gameScene().uiLayer.addChild(this)},e.prototype.onExit=function(){this.touchChildren=!1,Common.gameScene().uiLayer.removeChild(this)},e.prototype._OnHideCloth=function(){GameManager.Instance.Start(),Common.dispatchEvent(MainNotify.closeGameStartPanel),Common.dispatchEvent(MainNotify.openGamePanel)},e.prototype._OnStartGame=function(){this.touchChildren=!1,egret.Tween.get(this.m_imgCloth).to({y:-this.m_imgCloth.height},1e3,egret.Ease.backOut).call(this._OnHideCloth,this),Common.dispatchEvent(MainNotify.closeBottomBtnPanel)},e.prototype.onComplete=function(){this.m_imgCloth.addEventListener(egret.TouchEvent.TOUCH_TAP,this._OnStartGame,this),this._OnResize()},e.prototype._OnResize=function(t){void 0===t&&(t=null)},e}(BasePanel);__reflect(GameStartPanel.prototype,"GameStartPanel");var Monster=function(t){function e(){var e=t.call(this)||this;return e.m_gesture=Common.createBitmap("gestureSheet_json.gesture001"),e}return __extends(e,t),e.prototype.Init=function(){this.m_sumWeight=0;for(var t=0;t<GameConfig.monsterConfig.length;t++)this.m_sumWeight+=GameConfig.monsterConfig[t].Prob,GameConfig.monsterConfig[t].weight=this.m_sumWeight;this.m_data=this._RandomMonsterData(),this.m_data?(this.InitData(),this.InitGraph()):Error("no wolf data")},e.prototype.InitData=function(){var t=this.m_data.Animation,e=DragonBonesFactory.getInstance().buildArmature(t,t),n=DragonBonesFactory.getInstance().createWorldClock(10);null==this.m_armature&&(this.m_armature=new DragonBonesArmature(e,n)),this.m_armature.Armature=e,this.m_armature.Clock=n,this.m_armatureContainer.register(this.m_armature,[DragonBonesAnimations.Idle,DragonBonesAnimations.Dead,DragonBonesAnimations.Run,DragonBonesAnimations.Hurt]),this.m_state=EMonsterState.Ready,this.m_speedY=GameConfig.baseFallSpeed+this.m_data.Speed/100,this.m_speedX=.2,this.m_gestureData.length=0;for(var i=0;i<GameConfig.gestureConfig.length;i++)this.m_gestureData.push(GameConfig.gestureConfig[i])},e.prototype.InitGraph=function(){this.y=0,this.filters=[this.m_dropShadowFilter],this.UpdateSignSlot(),this.GotoIdle(),this.x=MathUtils.getRandom(this.m_armatureContainer.width/2,Config.stageWidth-this.m_armatureContainer.width/2)},e.prototype.GotoIdle=function(){this.m_armatureContainer.play(DragonBonesAnimations.Idle,0)},e.prototype.GotoHurt=function(){this.m_type!=EMonsterType.Normal&&this.m_armatureContainer.play(DragonBonesAnimations.Hurt,0)},e.prototype.GotoDead=function(){this.y>=100&&(this.Destroy(),PanelManager.m_gameScenePanel.RemoveMonster(this),PanelManager.m_gameScenePanel.Power+=this.m_data.Power)},e.prototype.GotoRun=function(){this.m_armatureContainer.play(DragonBonesAnimations.Run,0)},e.prototype.Update=function(t){this.m_state==EMonsterState.Ready?(this.y+=t*this.m_speedY,this.y>=Config.stageHeight-120&&(this.y=Config.stageHeight-120,this.m_state=EMonsterState.Run,this.GotoRun())):this.m_state==EMonsterState.Run&&(this.x-=t*this.m_speedX,this.x<=-this.m_armatureContainer.width&&(this.m_state=EMonsterState.Dead,this.Destroy(),PanelManager.m_gameScenePanel.RemoveMonster(this)))},e.prototype.Destroy=function(){this.m_armatureContainer.clear(),GameObjectPool.getInstance().destroyObject(this)},e.prototype.UpdateSignSlot=function(){var t=MathUtils.getRandom(this.m_gestureData.length-1),e=this.m_armature.Armature.getSlot("Sign");this.m_gesture.texture=RES.getRes(this.m_gestureData[t].path),this.m_gesture.x=e.display.x,this.m_gesture.y=e.display.y,this.m_gesture.anchorOffsetX=this.m_gesture.width/2,this.m_gesture.anchorOffsetY=this.m_gesture.height/2,e.setDisplay(this.m_gesture),this.m_gestureType=this.m_gestureData[t].type},Object.defineProperty(e.prototype,"GestureType",{get:function(){return this.m_gestureType},set:function(t){this.m_gestureType=t},enumerable:!0,configurable:!0}),e.prototype._RandomMonsterData=function(){for(var t=MathUtils.getRandom(1,this.m_sumWeight),e=0;e<GameConfig.monsterConfig.length;e++)if(t<=GameConfig.monsterConfig[e].weight)return GameConfig.monsterConfig[e];return null},e}(BaseActor);__reflect(Monster.prototype,"Monster");var HttpRequest=function(){function t(){this.urls={},this._reqQueue=new Array}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.addQueue=function(t){this._reqQueue.push(t)},t.prototype.send=function(t,e,n,i,r,o){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===o&&(o=null);var a=GameObjectPool.getInstance().createObject(Http,"Http");a.func=r,a.funcObj=o,a.open(this.urls[e],t,i);var s=JSON.stringify(n);i||(s=Common.getUrlParams(n)),a.send(s)},t}();__reflect(HttpRequest.prototype,"HttpRequest");var Http=function(){function t(){this.httpRequest=new egret.HttpRequest,this.httpRequest.responseType=egret.HttpResponseType.TEXT,this.httpRequest.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),this.httpRequest.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),this.httpRequest.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)}return t.prototype.send=function(t){void 0===t&&(t=null),this.httpRequest.send(t)},t.prototype.open=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=null),this.httpRequest.open(t,e),i&&this.httpRequest.setRequestHeader("Authentication-token",i),n?this.httpRequest.setRequestHeader("Content-Type","application/json"):this.httpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},t.prototype.onPostComplete=function(t){var e=this.httpRequest.response;GameObjectPool.getInstance().destroyObject(this);var n=JSON.parse(e);Common.log("onPostComplete",n)},t.prototype.onPostIOError=function(t){console.log("get Error",t)},t.prototype.onPostProgress=function(t){console.log("get progress : "+Math.floor(100*t.bytesLoaded/t.bytesTotal)+"%")},t.prototype.onPostClose=function(){},t}();__reflect(Http.prototype,"Http");var Animations;!function(t){function e(t,e,n,i){void 0===e&&(e=1e3),void 0===n&&(n=100),void 0===i&&(i=null);var r=Math.floor(e/(2*n)),o=0,a=function(){var e=this;egret.Tween.get(t).to({alpha:.3},n).call(function(){egret.Tween.get(t).to({alpha:1},n).call(function(){egret.Tween.removeTweens(t),o++,r>o?a():i&&i()},e)},this)}.bind(this);a()}function n(t,e,n){void 0===e&&(e=500),void 0===n&&(n=null),t.scaleX=0,t.scaleY=0,egret.Tween.get(t).to({scaleX:1,scaleY:1},e,egret.Ease.backOut).call(function(){n&&n()})}function i(t,e,n){void 0===e&&(e=500),void 0===n&&(n=null),egret.Tween.get(t).to({scaleX:0,scaleY:0},e,egret.Ease.backIn).call(function(){n&&n()})}function r(t,e){void 0===e&&(e=50),t.alpha=0;var n=function(){egret.Tween.get(t).to({alpha:0},200)};egret.Tween.get(t).to({y:t.y-e,alpha:1},400,egret.Ease.backOut).call(n)}function o(t,e,n,i){void 0===e&&(e=500),void 0===n&&(n=null),void 0===i&&(i=null),t.alpha=0,egret.Tween.get(t).to({alpha:1},e,egret.Ease.circOut).call(function(){i&&i()}),n&&n()}function a(t,e,n){void 0===e&&(e=500),void 0===n&&(n=null),t.alpha=1,egret.Tween.get(t).to({alpha:0},e,egret.Ease.circIn).call(function(){n&&n()})}function s(t,e,n,i,r,o){void 0===e&&(e=200),void 0===n&&(n=200),void 0===i&&(i=0),void 0===r&&(r=null),void 0===o&&(o=null),egret.Tween.get(t).to({alpha:1},e,egret.Ease.quintOut),egret.setTimeout(function(){egret.Tween.get(t).to({alpha:0},n,egret.Ease.quintIn).call(function(){r&&r(o)})},this,i)}t.flash=e,t.popupOut=n,t.popupIn=i,t.hurtTips=r,t.fadeOut=o,t.fadeIn=a,t.fadeOutIn=s}(Animations||(Animations={}));var AudioManager=function(){function t(){}return t.balloonBoom="resource/assets/voice/balloonBoom.mp3",t.begin="resource/assets/voice/begin.mp3",t.bgMusic="resource/assets/voice/bgMusic.mp3",t.bottleBreak="resource/assets/voice/bottleBreak.mp3",t.bottleChange="resource/assets/voice/bgMusic.mp3",t.fallGround="resource/assets/voice/fallGround.mp3",t.gesture="resource/assets/voice/gesture.mp3",t.gold="resource/assets/voice/gold.mp3",t.ice="resource/assets/voice/ice.mp3",t.potBoom="resource/assets/voice/potBoom.mp3",t.thief="resource/assets/voice/thief.mp3",t.thunder="resource/assets/voice/thunder.mp3",t.wolfFallDown="resource/assets/voice/wolfFallDown.mp3",t}();__reflect(AudioManager.prototype,"AudioManager");var Common;!function(t){function e(){var t=window.navigator.userAgent.toLowerCase(),e=""+t.match(/MicroMessenger/i);return"null"==e?!1:"micromessenger"==e?!0:void 0}function n(){var t=window.navigator.userAgent.toLowerCase();""+t.match(/MicroMessenger/i);return""+t.match(/windows nt/i)=="windows nt"?"windows":""+t.match(/iphone/i)=="iphone"?"ios":""+t.match(/android/i)=="android"?"android":""+t.match(/ipad/i)=="ipad"?"ipad":""+t.match(/linux/i)=="linux"?"linux":""+t.match(/mac/i)=="mac"?"mac":""+t.match(/ucbrower/i)=="ucbrower"?"ucbrower":void console.log("未知系统类型")}function i(){var t=window.navigator.userAgent.toLowerCase();return""+t.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+t.match(/qzone/i)=="qzone"?"qzone":""+t.match(/weibo/i)=="weibo"?"weibo":""+t.match(/qq/i)=="qq"?"qq":""+t.match(/renren/i)=="renren"?"renren":""+t.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+t.match(/douban/i)=="douban"?"douban":"other"}function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]}function o(t,e){void 0===e&&(e=!1);var n="",i=function(t,e){void 0===e&&(e=!1);for(var i=0;i<t.length;i++){var r=typeof t[i];"string"==r||"number"==r||"boolean"==r?n+=t[i]+",":(n+=o(t[i],!0),e||(n+=","))}t.length>0&&(n=n.substr(0,n.length-1))};if("[object Array]"==Object.prototype.toString.call(t)&&e&&(n+="[",i(t,!0),n+="]"),"[object Object]"==Object.prototype.toString.call(t))if(e){n+="{";for(var r in t)n+='"'+r+'":',n+="string"==typeof t[r]||"number"==typeof t[r]||"boolean"==typeof t[r]?t[r]:o(t[r],!0),n+=",";Object.keys(t).length>0&&(n=n.substr(0,n.length-1)),n+="}"}else for(var a in t){var s=typeof t[a];"string"==s||"number"==s||"boolean"==s?n+=a+"="+t[a]+"&":"[object Array]"==Object.prototype.toString.call(t[a])?(n+=a+"=[",i(t[a],!1),n+="]&"):(n+=a+"=",n+=o(t[a],!0),n+="&")}return n}function a(t){var e=o(t);return e.substr(0,e.length-1)}function s(t,e,n,i){void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=!1);var r=new lcp.LEvent(t,e,n,i);lcp.LListener.getInstance().dispatchEvent(r)}function h(t,e,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=0),lcp.LListener.getInstance().addEventListener(t,e,n,i,r)}function c(t,e,n,i){void 0===i&&(i=!1),lcp.LListener.getInstance().removeEventListener(t,e,n,i)}function u(){return egret.MainContext.instance.stage}function l(t,e,n){null!=t&&(t.x=e,t.y=n)}function p(t,e,n,i,r,o){void 0===e&&(e=30),void 0===n&&(n=16777215),void 0===i&&(i=!1),void 0===r&&(r="Arial"),void 0===o&&(o="left");var a=new egret.TextField;return a.text=t,a.size=e,a.textColor=n,a.bold=i,a.fontFamily=r,a.textAlign=o,a}function m(t,e,n,i){var r=new egret.Shape;return r.graphics.beginFill(0,1),r.graphics.drawRect(t,e,n,i),r.graphics.endFill(),r}function d(t){var e,n=RES.getRes(t+"_json"),i=RES.getRes(t+"_png"),r=new egret.MovieClipDataFactory(n,i);return e=new egret.MovieClip(r.generateMovieClipData(t))}function g(t,e,n,i,r){void 0===i&&(i=24),void 0===r&&(r=16777215);var o=new egret.TextField;return o.text=t,o.x=e,o.y=n,o.size=i,o.textColor=r,o}function f(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e}function _(t,e,n){t.x=e,t.y=n}function y(t,e){void 0===e&&(e=null);var n=new egret.BitmapText,i=RES.getRes(t);return n.font=i,e&&e.addChild(n),n}function v(t){var e={};t instanceof Array&&(e=[]);for(var n in t){var i=t[n];e[n]="object"==typeof i?v(i):i}return e}function C(t,e,n,i,r,o,a){void 0===n&&(n=0),void 0===i&&(i=5),void 0===r&&(r=5),void 0===o&&(o=0),void 0===a&&(a=0);var s=new egret.Sprite;return s.graphics.beginFill(n),s.graphics.drawRoundRect(o,a,t,e,i,r),s.graphics.endFill(),s}function E(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0);var r=new egret.Sprite;return r.graphics.beginFill(e),r.graphics.drawCircle(n,i,t),r.graphics.endFill(),r}function b(t,e,n,i,r){void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0);var o=new egret.Sprite;return o.graphics.beginFill(n),o.graphics.drawRect(i,r,t,e),o.graphics.endFill(),o}t.TextColors={white:16777215,milkWhite:15722688,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:10824988,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720,lvNotFull:7301213,lvFull:9551154},t.LabelFontSize={littleSize:12,middleSize:18,normalSize:24,bigSize:36},t.isWeiXin=e,t.systemType=n,t.platformType=i,t.log=r,t.getUrlParams=a,t.dispatchEvent=s,t.addEventListener=h,t.removeEventListener=c,t.curStage=u,t.SetXY=l,t.CreateText=p,t.CreateShape=m,t.CreateMovieClip=d,t.createText=g,t.createBitmap=f,t.setControlPosition=_,t.createBitmapText=y,t.cloneObj=v,t.getRoundRect=C,t.getCircle=E,t.getRect=b;var S=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t.VER_DEBUG="debug",t.VER_RELEASE="release",t}();t.Const=S,__reflect(S.prototype,"Common.Const");var T=function(e){function n(){var t=e.call(this)||this;return t._type=S.SHAPE_RECT,t._color=0,t.display=new egret.Sprite,t.bg=new egret.Sprite,t}return __extends(n,e),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),n.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},n.prototype.setPosition=function(){this._hasBg&&this.type!=S.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},n.prototype.setBackground=function(t,e){void 0===e&&(e=1),this._hasBg=!0;var n=this._data,i={};for(var r in n)i[r]=n[r];i.c=t,i.w&&(i.w=i.w+2*e),i.h&&(i.h=i.h+2*e),i.r&&(i.r=i.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(i),this.addChildAt(this.bg,0),this.setPosition()},n.prototype.getDisplay=function(e){switch(this.type){case S.SHAPE_RECT:return t.getRect(e.w,e.h,e.c);case S.SHAPE_RECT_ROUND:return t.getRoundRect(e.w,e.h,e.c,e.ew,e.eh);case S.SHAPE_CIRCLE:return t.getCircle(e.r,e.c)}},n}(egret.Sprite);t.MoonDisplayObject=T,__reflect(T.prototype,"Common.MoonDisplayObject")}(Common||(Common={}));var Config=function(){function t(){}return t.UserInfo={nickName:"",avatarUrl:""},t.stageWidth=0,t.stageHeight=0,t.stageHalfWidth=0,t.stageHalfHeight=0,t}();__reflect(Config.prototype,"Config");var GameObjectPool=function(){function t(){this._pool={},this._list=[]}return t.prototype.createObject=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r,o=e,a=this._pool[o];if(null!=a&&a.length)r=a.shift();else{var s=n.length;r=0==s?new t:1==s?new t(n[0]):2==s?new t(n[0],n[1]):3==s?new t(n[0],n[1],n[2]):new t(n[0],n[1],n[2],n[3]),r.key=o}return this._list.push(r),r},t.prototype.destroyObject=function(t){var e=t.key;null==this._pool[e]&&(this._pool[e]=[]),this._pool[e].push(t);var n=this._list.indexOf(t);-1!=n&&this._list.splice(n,1)},t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t}();__reflect(GameObjectPool.prototype,"GameObjectPool");var lcp;!function(t){var e=function(t){function e(e,n,i,r){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===r&&(r=!1);var o=t.call(this,e,i,r)||this;return o.name="LEvent",o.key="LEvent",n&&(o._obj=n),o}return __extends(e,t),e.prototype.clone=function(t){return new e(this.type,t?t:this._obj,this.bubbles,this.cancelable)},Object.defineProperty(e.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),e}(egret.Event);t.LEvent=e,__reflect(e.prototype,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(t){var e=function(){function t(){this.name="LListener",this.dispatcher||(this.dispatcher=new egret.EventDispatcher)}return t.getInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.addEventListener=function(t,e,n,i,r){void 0===i&&(i=!1),void 0===r&&(r=0),this.dispatcher.addEventListener(t,e,n,i,r)},t.prototype.removeEventListener=function(t,e,n,i){void 0===i&&(i=!1),this.dispatcher.removeEventListener(t,e,n,i)},t.prototype.hasEventListener=function(t){return this.dispatcher.hasEventListener(t)},t.prototype.dispatchEvent=function(t){this.dispatcher.dispatchEvent(t)},t}();t.LListener=e,__reflect(e.prototype,"lcp.LListener")}(lcp||(lcp={}));var MathUtils;!function(t){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,i=t.length;switch(i){case 0:n=Math.random();break;case 1:n=Math.floor((t[0]+1)*Math.random());break;default:n=Math.floor(Math.random()*(t[1]-t[0]+1)+t[0])}return n}function n(t,e,n,i){var r=Math.round(n-t),o=Math.round(i-e),a=r*r+o*o;return Math.floor(a)}function i(t,e,n,i){var r=Math.round(n-t),o=Math.round(i-e),a=Math.atan2(o,r),s=parseFloat(a.toFixed(2));return s}t.getRandom=e,t.getDistance=n,t.getRadian2=i}(MathUtils||(MathUtils={}));var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var i=Array(16),r=Array(16),o=0;16>o;o++)i[o]=909522486^n[o],r[o]=1549556828^n[o];var a=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<t.length;o++)n=t.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",r=t.length,o=0;r>o;o+=3)for(var a=t.charCodeAt(o)<<16|(r>o+1?t.charCodeAt(o+1)<<8:0)|(r>o+2?t.charCodeAt(o+2):0),s=0;4>s;s++)i+=8*o+6*s>8*t.length?this.b64pad:n.charAt(a>>>6*(3-s)&63);return i},t.prototype.rstr2any=function(t,e){var n,i,r,o,a,s=e.length,h=Array(Math.ceil(t.length/2));for(n=0;n<h.length;n++)h[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),u=Array(c);for(i=0;c>i;i++){for(a=Array(),o=0,n=0;n<h.length;n++)o=(o<<16)+h[n],r=Math.floor(o/s),o-=r*s,(a.length>0||r>0)&&(a[a.length]=r);u[i]=o,h=a}var l="";for(n=u.length-1;n>=0;n--)l+=e.charAt(u[n]);return l},t.prototype.str2rstr_utf8=function(t){for(var e,n,i="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,h=i,c=r,u=o;n=this.md5_ff(n,i,r,o,t[a+0],7,-680876936),o=this.md5_ff(o,n,i,r,t[a+1],12,-389564586),r=this.md5_ff(r,o,n,i,t[a+2],17,606105819),i=this.md5_ff(i,r,o,n,t[a+3],22,-1044525330),n=this.md5_ff(n,i,r,o,t[a+4],7,-176418897),o=this.md5_ff(o,n,i,r,t[a+5],12,1200080426),r=this.md5_ff(r,o,n,i,t[a+6],17,-1473231341),i=this.md5_ff(i,r,o,n,t[a+7],22,-45705983),n=this.md5_ff(n,i,r,o,t[a+8],7,1770035416),o=this.md5_ff(o,n,i,r,t[a+9],12,-1958414417),r=this.md5_ff(r,o,n,i,t[a+10],17,-42063),i=this.md5_ff(i,r,o,n,t[a+11],22,-1990404162),n=this.md5_ff(n,i,r,o,t[a+12],7,1804603682),o=this.md5_ff(o,n,i,r,t[a+13],12,-40341101),r=this.md5_ff(r,o,n,i,t[a+14],17,-1502002290),i=this.md5_ff(i,r,o,n,t[a+15],22,1236535329),n=this.md5_gg(n,i,r,o,t[a+1],5,-165796510),o=this.md5_gg(o,n,i,r,t[a+6],9,-1069501632),r=this.md5_gg(r,o,n,i,t[a+11],14,643717713),i=this.md5_gg(i,r,o,n,t[a+0],20,-373897302),n=this.md5_gg(n,i,r,o,t[a+5],5,-701558691),o=this.md5_gg(o,n,i,r,t[a+10],9,38016083),r=this.md5_gg(r,o,n,i,t[a+15],14,-660478335),i=this.md5_gg(i,r,o,n,t[a+4],20,-405537848),n=this.md5_gg(n,i,r,o,t[a+9],5,568446438),o=this.md5_gg(o,n,i,r,t[a+14],9,-1019803690),r=this.md5_gg(r,o,n,i,t[a+3],14,-187363961),i=this.md5_gg(i,r,o,n,t[a+8],20,1163531501),n=this.md5_gg(n,i,r,o,t[a+13],5,-1444681467),o=this.md5_gg(o,n,i,r,t[a+2],9,-51403784),r=this.md5_gg(r,o,n,i,t[a+7],14,1735328473),i=this.md5_gg(i,r,o,n,t[a+12],20,-1926607734),n=this.md5_hh(n,i,r,o,t[a+5],4,-378558),o=this.md5_hh(o,n,i,r,t[a+8],11,-2022574463),r=this.md5_hh(r,o,n,i,t[a+11],16,1839030562),i=this.md5_hh(i,r,o,n,t[a+14],23,-35309556),n=this.md5_hh(n,i,r,o,t[a+1],4,-1530992060),o=this.md5_hh(o,n,i,r,t[a+4],11,1272893353),r=this.md5_hh(r,o,n,i,t[a+7],16,-155497632),i=this.md5_hh(i,r,o,n,t[a+10],23,-1094730640),n=this.md5_hh(n,i,r,o,t[a+13],4,681279174),o=this.md5_hh(o,n,i,r,t[a+0],11,-358537222),r=this.md5_hh(r,o,n,i,t[a+3],16,-722521979),i=this.md5_hh(i,r,o,n,t[a+6],23,76029189),n=this.md5_hh(n,i,r,o,t[a+9],4,-640364487),o=this.md5_hh(o,n,i,r,t[a+12],11,-421815835),r=this.md5_hh(r,o,n,i,t[a+15],16,530742520),i=this.md5_hh(i,r,o,n,t[a+2],23,-995338651),n=this.md5_ii(n,i,r,o,t[a+0],6,-198630844),o=this.md5_ii(o,n,i,r,t[a+7],10,1126891415),r=this.md5_ii(r,o,n,i,t[a+14],15,-1416354905),i=this.md5_ii(i,r,o,n,t[a+5],21,-57434055),n=this.md5_ii(n,i,r,o,t[a+12],6,1700485571),o=this.md5_ii(o,n,i,r,t[a+3],10,-1894986606),r=this.md5_ii(r,o,n,i,t[a+10],15,-1051523),i=this.md5_ii(i,r,o,n,t[a+1],21,-2054922799),n=this.md5_ii(n,i,r,o,t[a+8],6,1873313359),o=this.md5_ii(o,n,i,r,t[a+15],10,-30611744),r=this.md5_ii(r,o,n,i,t[a+6],15,-1560198380),i=this.md5_ii(i,r,o,n,t[a+13],21,1309151649),n=this.md5_ii(n,i,r,o,t[a+4],6,-145523070),o=this.md5_ii(o,n,i,r,t[a+11],10,-1120210379),r=this.md5_ii(r,o,n,i,t[a+2],15,718787259),i=this.md5_ii(i,r,o,n,t[a+9],21,-343485551),n=this.safe_add(n,s),i=this.safe_add(i,h),r=this.safe_add(r,c),o=this.safe_add(o,u)}return[n,i,r,o]},t.prototype.md5_cmn=function(t,e,n,i,r,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),r),n)},t.prototype.md5_ff=function(t,e,n,i,r,o,a){return this.md5_cmn(e&n|~e&i,t,e,r,o,a)},t.prototype.md5_gg=function(t,e,n,i,r,o,a){return this.md5_cmn(e&i|n&~i,t,e,r,o,a)},t.prototype.md5_hh=function(t,e,n,i,r,o,a){return this.md5_cmn(e^n^i,t,e,r,o,a)},t.prototype.md5_ii=function(t,e,n,i,r,o,a){return this.md5_cmn(n^(e|~i),t,e,r,o,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var ShakeTool=function(){function t(){this.count=0,this.timer=new egret.Timer(100)}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.shakeObj=function(t,e,n,i){this.target=t,this.maxDis=i,this.count=e*n,this.rate=n,this.timer.delay=100/n,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},t.prototype.setInitPos=function(t,e){this.initX=t,this.initY=e},t.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},100/this.rate)},t.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},t.prototype.stop=function(){this.shakeComplete()},t}();__reflect(ShakeTool.prototype,"ShakeTool");